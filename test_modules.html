<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module System Test</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: #0f0;
        }
        h1 { color: #0ff; }
        h2 { color: #ff0; margin-top: 30px; }
        .module {
            border: 1px solid #0f0;
            padding: 15px;
            margin: 20px 0;
            background: #0a0a0a;
        }
        .method {
            margin: 5px 0;
            padding: 5px 10px;
            background: #111;
            border-left: 3px solid #0f0;
        }
        pre {
            background: #222;
            padding: 10px;
            overflow-x: auto;
            color: #0ff;
        }
        .success { color: #0f0; }
        .warning { color: #ff0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <h1>üì¶ Module System Implementation - Week 4, Step 1</h1>
    
    <p>The application is now organized into clear, logical modules while maintaining the monolithic structure.</p>
    
    <h2>‚úÖ Module Structure</h2>
    
    <div class="module">
        <h3>1. Storage Module</h3>
        <p>Handles all data persistence operations</p>
        <div class="method">getCurrentUsername()</div>
        <div class="method">setCurrentUsername(username)</div>
        <div class="method">getUserAnswers(username)</div>
        <div class="method">saveUserAnswer(questionId, answer, username)</div>
        <div class="method">getClassData()</div>
        <div class="method">saveClassData(data)</div>
        <div class="method">loadQuestions()</div>
        <div class="method">getLessonQuestions(lessonId)</div>
        
        <h4>Usage Example:</h4>
        <pre>
APStatsQuiz.Storage.getCurrentUsername();
APStatsQuiz.Storage.saveUserAnswer('U1-L1-Q1', 'B');
APStatsQuiz.Storage.getStorageStats();
        </pre>
    </div>
    
    <div class="module">
        <h3>2. Charts Module</h3>
        <p>All chart rendering and management</p>
        <div class="method">renderChart(chartData, questionId)</div>
        <div class="method">destroyChart(chartId)</div>
        <div class="method">destroyAllCharts()</div>
        <div class="method">getChartColors(count)</div>
        <div class="method">getGridColor()</div>
        
        <h4>Usage Example:</h4>
        <pre>
APStatsQuiz.Charts.renderChart(data, 'q1');
APStatsQuiz.Charts.destroyAllCharts();
APStatsQuiz.Charts.getChartColors(5);
        </pre>
    </div>
    
    <div class="module">
        <h3>3. Quiz Module</h3>
        <p>Quiz logic and question handling</p>
        <div class="method">loadUnit(unitId)</div>
        <div class="method">loadLesson(lessonId)</div>
        <div class="method">submitAnswer(questionId, questionType)</div>
        <div class="method">renderQuiz(questions)</div>
        <div class="method">getCurrentQuestions()</div>
        <div class="method">calculateBadges(username)</div>
        
        <h4>Usage Example:</h4>
        <pre>
APStatsQuiz.Quiz.loadLesson('U1-L1');
APStatsQuiz.Quiz.submitAnswer('U1-L1-Q1', 'multiple-choice');
const questions = APStatsQuiz.Quiz.getCurrentQuestions();
        </pre>
    </div>
    
    <div class="module">
        <h3>4. UI Module</h3>
        <p>User interface components and updates</p>
        <div class="method">showMessage(message, type)</div>
        <div class="method">toggleTheme()</div>
        <div class="method">renderAttachments(attachments)</div>
        <div class="method">updateMessageArea(html)</div>
        <div class="method">updateQuestionsContainer(html)</div>
        
        <h4>Usage Example:</h4>
        <pre>
APStatsQuiz.UI.showMessage('Success!', 'success');
APStatsQuiz.UI.toggleTheme();
APStatsQuiz.UI.updateMessageArea('<p>Welcome!</p>');
        </pre>
    </div>
    
    <div class="module">
        <h3>5. User Module</h3>
        <p>User management and authentication</p>
        <div class="method">generateRandomUsername()</div>
        <div class="method">rerollUsername()</div>
        <div class="method">acceptUsername(username)</div>
        <div class="method">getCurrentUsername()</div>
        <div class="method">initClassData()</div>
        
        <h4>Usage Example:</h4>
        <pre>
const username = APStatsQuiz.User.generateRandomUsername();
APStatsQuiz.User.acceptUsername(username);
APStatsQuiz.User.initClassData();
        </pre>
    </div>
    
    <div class="module">
        <h3>6. Utils Module</h3>
        <p>Performance utilities and helpers</p>
        <div class="method">debounce(func, wait)</div>
        <div class="method">throttle(func, limit)</div>
        <div class="method">errorBoundary(fn, context)</div>
        <div class="method">smoothUpdate(callback)</div>
        <div class="method">lazyLoadQuizData(lessonId)</div>
        <div class="method">DevTools.*</div>
        
        <h4>Usage Example:</h4>
        <pre>
const debouncedSave = APStatsQuiz.Utils.debounce(save, 500);
const safeFn = APStatsQuiz.Utils.errorBoundary(riskyFn, 'Context');
APStatsQuiz.Utils.DevTools.inspectData();
        </pre>
    </div>
    
    <h2>üéØ Benefits of Modular Structure</h2>
    <ul>
        <li class="success">‚úì Clear separation of concerns</li>
        <li class="success">‚úì Easy to understand and maintain</li>
        <li class="success">‚úì Testable individual modules</li>
        <li class="success">‚úì Prevents global namespace pollution</li>
        <li class="success">‚úì Backward compatible with legacy code</li>
        <li class="success">‚úì No build process required</li>
    </ul>
    
    <h2>üîÑ Migration Path</h2>
    <p>The modular structure maintains backward compatibility:</p>
    <pre>
// Old way (still works)
APStatsQuiz.submitAnswer('q1', 'multiple-choice');

// New modular way (preferred)
APStatsQuiz.Quiz.submitAnswer('q1', 'multiple-choice');
    </pre>
    
    <h2>üìä Module Dependencies</h2>
    <pre>
Storage Module  ‚Üê Quiz Module
      ‚Üë             ‚Üì
      |           UI Module
      |             ‚Üë
      ‚îî‚îÄ‚îÄ User Module
           
Utils Module (standalone, used by all)
Charts Module (standalone, used by UI/Quiz)
    </pre>
    
    <h2>üöÄ Testing the Modules</h2>
    <p>Open the browser console and try:</p>
    <pre>
// Inspect module structure
console.log(APStatsQuiz);

// Test Storage module
APStatsQuiz.Storage.getStorageStats();

// Test Utils module
APStatsQuiz.Utils.DevTools.getMemoryUsage();

// Test UI module  
APStatsQuiz.UI.showMessage('Module test!', 'success');
    </pre>
    
    <p><a href="index.html" style="color: #0ff;">‚Üê Back to Application</a></p>
    
    <script>
        console.log('Module Test Page Loaded');
        console.log('Available modules:');
        console.log('- APStatsQuiz.Storage');
        console.log('- APStatsQuiz.Charts');
        console.log('- APStatsQuiz.Quiz');
        console.log('- APStatsQuiz.UI');
        console.log('- APStatsQuiz.User');
        console.log('- APStatsQuiz.Utils');
    </script>
</body>
</html>